@inherits BluentComponentBase
@using Bluent.UI.Diagrams.Components.Internals
@using Bluent.UI.Diagrams.Elements.Diagram

<CascadingValue Value="this" IsFixed>

    <svg @attributes=AdditionalAttributes
         tabindex="0"
         id="@Id"
         class="@GetComponentClass()"
         style="@Style"
         cursor="@Cursor"
         @onpointerdown="HandlePointerDown"
         @onpointerup="HandlePointerUp"
         @onpointermove="HandlePointerMove"
         @onpointercancel="HandlePointerCancel"
         @onpointerenter="HandlePointerEnter"
         @onpointerout="HandlePointerOut"
         @onpointerleave="HandlePointerLeave"
         @onpointerover="HandlePointerOver"
         @onmousewheel="HandleMouseWheel"
         @onkeydown="HandleKeyDown"
         @onkeyup="HandleKeyUp">
        @ChildContent

        @* <CanvasGround /> *@
        <g transform="translate(@(_pan.Dx + _activePan.Dx), @(_pan.Dy + _activePan.Dy)) scale(@_scale)">
            @foreach (var el in Elements.OrderBy(x => x.IsSelected).ThenBy(x => (x as IDiagramElementContainer)?.HasSelection ?? false))
            {
                <ElementHost @key=el Element="el" />
            }
        </g>
    </svg>
</CascadingValue>
