@namespace Bluent.UI.Components
@inherits BluentFieldComponentBase<string?>

<div @attributes=AdditionalAttributes id="@Id" class="@GetComponentClass()" style="@Style">
    <div id="@($"otp{Id}")"
         class="otp @Class"
         data-otp
         data-otp-id="@($"otp{Id}")"
         data-otp-hidden="hidden@(Id)"
         data-otp-length="@Length"
         data-otp-blazor-event="@BindValueEvent"
         role="group"
         aria-label="Verification code">
        @for (var i = 0; i < Math.Max(1, Length); i++)
        {
            <div class="otp-cell">
                <input type="@(Password ? "password" : "text")"
                       class="otp-cell-input"
                       inputmode="numeric"
                       autocomplete="one-time-code"
                       pattern="\d*"
                       maxlength="1"
                       value="@(i < Digits.Length ? Digits[i] : string.Empty)"
                       aria-label="Digit @(i + 1) of @Length"
                       data-idx="@i"/>
            </div>
        }
    </div>
    <input type="hidden"
           @ref=Element
           id="hidden@(Id)"
           name="@NameAttributeValue"
           @bind-value="CurrentValueAsString" 
           @bind-value:event="@BindValueEvent"/>
</div>
