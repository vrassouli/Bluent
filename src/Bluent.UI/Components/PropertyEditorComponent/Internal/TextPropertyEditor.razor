@using System.Reflection
<Bluent.UI.Components.TextField Value="@Value" ValueExpression="() => Value" 
                                ValueChanged="OnValueChanged" 
                                Class="flex-fill"
                                id="@Property.Name" />
<PropertyDescription Property="Property" />

@code {
    [Parameter] public PropertyInfo Property { get; set; } = null!;
    [Parameter] public object Object { get; set; } = null!;
    [Parameter] public EventCallback ValueUpdated { get; set; }
    [CascadingParameter] public PropertyEditor Editor { get; set; } = default!;

    private string? Value => Property.GetValue(Object)?.ToString();

    private async Task OnValueChanged(string? newValue)
    {
        if (newValue is null)
        {
            //Property.SetValue(Object, null);
            Editor.SetPropertyValue(Object, null, Property);
        }
        else
        {
            var convertedValue = Convert.ChangeType(newValue, Property.PropertyType);
            //Property.SetValue(Object, convertedValue);
            Editor.SetPropertyValue(Object, convertedValue, Property);
        }

        await ValueUpdated.InvokeAsync();
    }
}